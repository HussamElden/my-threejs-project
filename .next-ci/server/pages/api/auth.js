"use strict";(()=>{var e={};e.id=725,e.ids=[725],e.modules={1421:e=>{e.exports=require("node:child_process")},1455:e=>{e.exports=require("node:fs/promises")},1708:e=>{e.exports=require("node:process")},2056:(e,r,t)=>{t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{default:()=>n});var o=t(9302),a=t(3139),i=e([a]);async function n(e,r){if("POST"!==e.method)return r.setHeader("Allow",["POST"]),r.status(405).end(`Method ${e.method} Not Allowed`);try{let{action:t,name:s,email:i,password:n,role:u}=e.body;if("register"===t)try{let e=await o.A.user.create({data:{name:s||"User",email:i,password:n,role:u||"USER"},select:{id:!0,name:!0,email:!0,role:!0}});return r.status(201).json({user:e})}catch(e){return console.error("Registration error:",e),r.status(500).json({error:"Registration failed"})}if(!i||!n)return r.status(400).json({error:"Email and password are required"});let d=await o.A.user.findUnique({where:{email:i},select:{id:!0,name:!0,email:!0,password:!0,role:!0}});if(!d||!await a.default.compare(n,d.password))return r.status(401).json({error:"Invalid email or password"});let{password:p,...l}=d;return r.status(200).json({user:l})}catch(e){return console.error("Authentication error:",e),r.status(500).json({error:"Authentication failed"})}}a=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},3024:e=>{e.exports=require("node:fs")},3139:e=>{e.exports=import("bcryptjs")},3873:e=>{e.exports=require("path")},4090:(e,r,t)=>{t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{config:()=>p,default:()=>d,routeModule:()=>l});var o=t(3480),a=t(8667),i=t(6435),n=t(2056),u=e([n]);n=(u.then?(await u)():u)[0];let d=(0,i.M)(n,"default"),p=(0,i.M)(n,"config"),l=new o.PagesAPIRouteModule({definition:{kind:a.A.PAGES_API,page:"/api/auth",pathname:"/api/auth",bundlePath:"",filename:""},userland:n});s()}catch(e){s(e)}})},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6698:e=>{e.exports=require("node:async_hooks")},6760:e=>{e.exports=require("node:path")},7066:e=>{e.exports=require("node:tty")},7598:e=>{e.exports=require("node:crypto")},7975:e=>{e.exports=require("node:util")},8161:e=>{e.exports=require("node:os")},8474:e=>{e.exports=require("node:events")},9021:e=>{e.exports=require("fs")}};var r=require("../../webpack-api-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[285],()=>t(4090));module.exports=s})();