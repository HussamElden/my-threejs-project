"use strict";exports.id=766,exports.ids=[766],exports.modules={16:(e,r,s)=>{s.d(r,{A:()=>l,O:()=>i});var a=s(8732),n=s(2015),t=s(4233);let o=(0,n.createContext)({});function i({children:e}){let[r,s]=(0,n.useState)(null),i=(0,t.useRouter)(),l=async(e,r)=>{try{let a=await fetch("/api/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})}),n=await a.json();if(a.ok)s(n.user),localStorage.setItem("user",JSON.stringify(n.user));else throw Error(n.error||"Login failed")}catch(e){throw console.error("Login error:",e),e}};return(0,a.jsx)(o.Provider,{value:{user:r,login:l,logout:()=>{s(null),localStorage.removeItem("user"),i.push("/")}},children:e})}let l=()=>(0,n.useContext)(o)},566:(e,r,s)=>{s.a(e,async(e,a)=>{try{s.d(r,{A:()=>b});var n=s(8732),t=s(2015),o=s(4896),i=s(3050),l=s(3082),c=s(4930),d=s(3670),h=s(7018),u=s(9476),m=s(6460),x=s(540),A=s(1994),p=s(4330),f=s(4432),j=s(5674),y=s(8960),w=s(4233),g=s(16),v=e([o,i,l,c,d,h,u,m,x,A,p,f,j,y]);function b({open:e,onClose:r}){(0,w.useRouter)();let{login:s}=(0,g.A)(),[a,v]=(0,t.useState)(!0),[b,S]=(0,t.useState)(!1),[C,P]=(0,t.useState)(""),[N,R]=(0,t.useState)(""),[I,T]=(0,t.useState)({name:"",email:"",password:"",confirmPassword:"",role:"BARISTA"}),D=e=>{let{name:r,value:s}=e.target;T({...I,[r]:s})},L=()=>{if(!I.email||!I.password)return P("Email and password are required"),!1;if(!a){if(!I.name)return P("Name is required"),!1;if(I.password!==I.confirmPassword)return P("Passwords do not match"),!1;if(I.password.length<6)return P("Password must be at least 6 characters"),!1}return!0},O=async e=>{if(e.preventDefault(),P(""),R(""),L()){S(!0);try{if(a)try{await s(I.email,I.password),R("Login successful!"),setTimeout(()=>{r()},1500)}catch(e){P(e.message||"An error occurred")}else{let e=await fetch("/api/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"register",email:I.email,password:I.password,role:I.role})});if(!e.ok){let r=await e.json();throw Error(r.error||"Failed to create account")}await e.json(),R("Account created successfully! You can now login."),v(!0),T({...I,password:"",confirmPassword:""})}}catch(e){P(e.message||"An error occurred")}finally{S(!1)}}};return(0,n.jsxs)(o.A,{open:e,onClose:r,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(i.A,{children:a?"Login to Your Account":"Create a New Account"}),(0,n.jsxs)("form",{onSubmit:O,children:[(0,n.jsxs)(l.A,{children:[C&&(0,n.jsx)(c.A,{severity:"error",sx:{mb:2},children:C}),N&&(0,n.jsx)(c.A,{severity:"success",sx:{mb:2},children:N}),!a&&(0,n.jsx)(d.A,{margin:"dense",label:"Name",type:"text",fullWidth:!0,name:"name",value:I.name,onChange:D,required:!0,variant:"outlined",sx:{mb:2}}),(0,n.jsx)(d.A,{margin:"dense",label:"Email Address",type:"email",fullWidth:!0,name:"email",value:I.email,onChange:D,required:!0,variant:"outlined",sx:{mb:2}}),(0,n.jsx)(d.A,{margin:"dense",label:"Password",type:"password",fullWidth:!0,name:"password",value:I.password,onChange:D,required:!0,variant:"outlined",sx:{mb:2}}),!a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.A,{margin:"dense",label:"Confirm Password",type:"password",fullWidth:!0,name:"confirmPassword",value:I.confirmPassword,onChange:D,required:!0,variant:"outlined",sx:{mb:2}}),(0,n.jsxs)(h.A,{fullWidth:!0,sx:{mb:2},children:[(0,n.jsx)(u.A,{id:"role-select-label",children:"Role"}),(0,n.jsxs)(m.A,{labelId:"role-select-label",id:"role-select",name:"role",value:I.role,label:"Role",onChange:D,children:[(0,n.jsx)(x.A,{value:"BARISTA",children:"Barista"}),(0,n.jsx)(x.A,{value:"MANAGER",children:"Manager"}),(0,n.jsx)(x.A,{value:"ADMIN",children:"Admin"})]})]})]}),(0,n.jsx)(A.A,{sx:{mt:2,textAlign:"center"},children:(0,n.jsxs)(p.A,{variant:"body2",children:[a?"Don't have an account?":"Already have an account?",(0,n.jsx)(f.A,{onClick:()=>{v(!a),P(""),R("")},color:"primary",sx:{ml:1},children:a?"Sign Up":"Login"})]})})]}),(0,n.jsxs)(j.A,{sx:{px:3,pb:3},children:[(0,n.jsx)(f.A,{onClick:r,color:"primary",disabled:b,children:"Cancel"}),(0,n.jsx)(f.A,{type:"submit",variant:"contained",color:"primary",disabled:b,startIcon:b?(0,n.jsx)(y.A,{size:20}):null,children:a?"Login":"Sign Up"})]})]})]})}[o,i,l,c,d,h,u,m,x,A,p,f,j,y]=v.then?(await v)():v,a()}catch(e){a(e)}})},7385:(e,r,s)=>{s.a(e,async(e,a)=>{try{s.r(r),s.d(r,{default:()=>h});var n=s(8732),t=s(2921),o=s(1806),i=s(8050),l=s(9483),c=s(16),d=e([l,t,o,i]);[l,t,o,i]=d.then?(await d)():d;let u=(0,t.A)({palette:{mode:"light",primary:{main:"#6c4f3d"},secondary:{main:"#ff9800"}},typography:{fontFamily:"'Roboto', sans-serif"}});function h({Component:e,pageProps:r}){return(0,n.jsx)(c.O,{children:(0,n.jsxs)(o.A,{theme:u,children:[(0,n.jsx)(i.Ay,{}),(0,n.jsx)(l.A,{children:(0,n.jsx)(e,{...r})})]})})}a()}catch(e){a(e)}})},9483:(e,r,s)=>{s.a(e,async(e,a)=>{try{s.d(r,{A:()=>p});var n=s(8732),t=s(2396),o=s(9322),i=s(4330),l=s(4432),c=s(6970),d=s(9918),h=s.n(d),u=s(2015),m=s(566),x=s(16),A=e([m,t,o,i,l,c]);function p({children:e}){let[r,s]=(0,u.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.A,{position:"static",color:"primary",children:(0,n.jsxs)(o.A,{children:[(0,n.jsx)(i.A,{variant:"h6",sx:{flexGrow:1},children:(0,n.jsx)(h(),{href:"/",style:{textDecoration:"none",color:"white"},children:"The Brewery"})}),(0,n.jsx)(l.A,{color:"inherit",component:h(),href:"/scene",children:"3D Scene"}),(0,n.jsx)(l.A,{color:"inherit",component:h(),href:"/dashboard",children:"Dashboard"}),((0,x.A)().user?.role==="ADMIN"||(0,x.A)().user?.role==="MANAGER")&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.A,{color:"inherit",component:h(),href:"/inventory",children:"Inventory"}),(0,n.jsx)(l.A,{color:"inherit",component:h(),href:"/recipes",children:"Recipes"})]}),(0,n.jsx)(l.A,{color:"inherit",onClick:()=>{s(!0)},children:"Login"}),(0,n.jsx)(m.A,{open:r,onClose:()=>{s(!1)}})]})}),(0,n.jsx)(c.A,{sx:{mt:4},children:e})]})}[m,t,o,i,l,c]=A.then?(await A)():A,a()}catch(e){a(e)}})}};